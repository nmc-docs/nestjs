"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[972],{3547:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"nestjs-fundamentals/providers","title":"Providers","description":"Dependency Injection (DI) l\xe0 g\xec?","source":"@site/docs/nestjs-fundamentals/providers.md","sourceDirName":"nestjs-fundamentals","slug":"/nestjs-fundamentals/providers","permalink":"/nestjs/nestjs-fundamentals/providers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"NestJS Fundamentals","permalink":"/nestjs/category/nestjs-fundamentals"},"next":{"title":"Modules","permalink":"/nestjs/nestjs-fundamentals/modules"}}');var r=t(4848),i=t(8453);const c={sidebar_position:1},a="Providers",o={},l=[{value:"Dependency Injection (DI) l\xe0 g\xec?",id:"dependency-injection-di-l\xe0-g\xec",level:2},{value:"\u0110\u1ecbnh ngh\u0129a Provider",id:"\u0111\u1ecbnh-ngh\u0129a-provider",level:2}];function d(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"providers",children:"Providers"})}),"\n",(0,r.jsx)(e.h2,{id:"dependency-injection-di-l\xe0-g\xec",children:"Dependency Injection (DI) l\xe0 g\xec?"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Ta c\xf3 v\xed d\u1ee5 sau:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"class UserService {\n  private authService: AuthService;\n\n  constructor(authService: AuthService) {\n    this.authService = authService;\n  }\n\n  async login(username: string, password: string): Promise<User> {\n    const token = await this.authService.authenticate(username, password);\n    const user = await this.getUser(token);\n    return user;\n  }\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'class AuthService {\n  private databaseService: DatabaseService;\n\n  constructor(databaseService: DatabaseService) {\n    this.databaseService = databaseService;\n  }\n\n  async authenticate(username: string, password: string): Promise<string> {\n    const isValid = await this.databaseService.verifyCredentials(\n      username,\n      password\n    );\n    if (isValid) {\n      return this.generateToken(username);\n    } else {\n      throw new Error("Invalid credentials");\n    }\n  }\n\n  private generateToken(username: string): string {\n    // Logic to generate an authentication token\n    return "ABC123";\n  }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'class DatabaseService {\n  async verifyCredentials(\n    username: string,\n    password: string\n  ): Promise<boolean> {\n    // Logic to check the database for valid credentials\n    return username === "admin" && password === "password";\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.admonition,{type:"note",children:[(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Trong v\xed d\u1ee5 tr\xean, ta th\u1ea5y UserService ph\u1ee5 thu\u1ed9c v\xe0o AuthService, AuthService sau \u0111\xf3 ph\u1ee5 thu\u1ed9c v\xe0o DatabaseService, do \u0111\xf3 khi kh\u1edfi t\u1ea1o s\u1ebd nh\u01b0 sau:"}),"\n"]}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"new UserService(new AuthService(new DatabaseService()));\n"})}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"V\u1ea5n \u0111\u1ec1 l\xe0 khi 1 service c\xf3 qu\xe1 nhi\u1ec1u s\u1ef1 ph\u1ee5 thu\u1ed9c v\xe0o c\xe1c service kh\xe1c, vi\u1ec7c qu\u1ea3n l\xfd c\u0169ng nh\u01b0 t\u1ed5 ch\u1ee9c code g\u1eb7p kh\xf3 kh\u0103n, v\xec v\u1eady k\u1ef9 thu\u1eadt Dependency Injection l\xe0 gi\u1ea3i ph\xe1p."}),"\n"]})]}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Dependency Injection (DI) l\xe0 m\u1ed9t m\xf4 h\xecnh thi\u1ebft k\u1ebf ph\u1ea7n m\u1ec1m trong \u0111\xf3 c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng nh\u1eadn \u0111\u01b0\u1ee3c c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng ph\u1ee5 thu\u1ed9c c\u1ee7a ch\xfang th\xf4ng qua m\u1ed9t c\u01a1 ch\u1ebf b\xean ngo\xe0i thay v\xec t\u1ef1 t\u1ea1o ra ch\xfang."}),"\n",(0,r.jsx)(e.li,{children:'Trong DI, thay v\xec t\u1ea1o ra c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng ph\u1ee5 thu\u1ed9c trong b\u1ea3n th\xe2n \u0111\u1ed1i t\u01b0\u1ee3ng s\u1eed d\u1ee5ng ch\xfang, c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng ph\u1ee5 thu\u1ed9c n\xe0y \u0111\u01b0\u1ee3c cung c\u1ea5p b\u1edfi m\u1ed9t "Injector" ho\u1eb7c "Container" b\xean ngo\xe0i (Trong NestJS n\xf3 g\u1ecdi l\xe0 Nest IoC Container). \u0110i\u1ec1u n\xe0y gi\xfap gi\u1ea3m s\u1ef1 k\u1ebft d\xednh gi\u1eefa c\xe1c th\xe0nh ph\u1ea7n trong \u1ee9ng d\u1ee5ng.'}),"\n",(0,r.jsxs)(e.li,{children:["C\xe1c th\xe0nh ph\u1ea7n \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u l\xe0 \u0111\u1ed1i t\u01b0\u1ee3ng ph\u1ee5 thu\u1ed9c g\u1ecdi l\xe0 m\u1ed9t ",(0,r.jsx)(e.strong,{children:"Provider"})]}),"\n"]})}),"\n",(0,r.jsx)(e.h2,{id:"\u0111\u1ecbnh-ngh\u0129a-provider",children:"\u0110\u1ecbnh ngh\u0129a Provider"}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Trong NestJS, ta c\xf3 th\u1ec3 \u0111\xe1nh d\u1ea5u m\u1ed9t service l\xe0 m\u1ed9t provider th\xf4ng qua ",(0,r.jsx)(e.strong,{children:"@Injectable()"})]}),"\n",(0,r.jsxs)(e.li,{children:["Khi ta \u0111\xe1nh d\u1ea5u m\u1ed9t class b\u1eb1ng decorator ",(0,r.jsx)(e.code,{children:"@Injectable()"}),", NestJS bi\u1ebft r\u1eb1ng class n\xe0y c\u1ea7n \u0111\u01b0\u1ee3c x\u1eed l\xfd b\u1edfi container dependency injection. \u0110i\u1ec1u n\xe0y cho ph\xe9p ta inject class n\xe0y v\xe0o class kh\xe1c l\xe0m l\xe0m \u0111\u1ed1i t\u01b0\u1ee3ng ph\u1ee5 thu\u1ed9c m\xe0 kh\xf4ng c\u1ea7n kh\u1edfi t\u1ea1o ch\xfang."]}),"\n"]})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"V\xed d\u1ee5:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="cat.service.ts"',children:'import { Injectable } from "@nestjs/common";\nimport { Cat } from "./interfaces/cat.interface";\n\n@Injectable()\nexport class CatsService {\n  private readonly cats: Cat[] = [];\n\n  findAll(): Cat[] {\n    return this.cats;\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"V\xe0 ta s\u1eed d\u1ee5ng CatsService n\xe0y \u1edf trong CatsController:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="cat.controller.ts"',children:'import { Controller, Get } from "@nestjs/common";\nimport { CatsService } from "./cats.service";\nimport { Cat } from "./interfaces/cat.interface";\n\n@Controller("cats")\nexport class CatsController {\n  constructor(private catsService: CatsService) {}\n\n  @Get()\n  async findAll(): Promise<Cat[]> {\n    return this.catsService.findAll();\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:'Cu\u1ed1i c\xf9ng, ta ph\u1ea3i "\u0111\u0103ng k\xfd" (register) provider CatsService n\xe0y v\u1edbi Nest IoC Container th\xf4ng qua providers trong CatsModule:'}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",metastring:'title="cat.module.ts"',children:'import { Module } from "@nestjs/common";\nimport { CatsController } from "./cats/cats.controller";\nimport { CatsService } from "./cats/cats.service";\n\n@Module({\n  controllers: [CatsController],\n  providers: [CatsService],\n})\nexport class CatsModule {}\n'})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function c(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);