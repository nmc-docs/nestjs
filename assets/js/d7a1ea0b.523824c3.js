"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[486],{1909:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var t=s(4848),r=s(8453);const i={sidebar_position:8},o="Nestjs Swagger",c={id:"nestjs-swagger",title:"Nestjs Swagger",description:"C\xe0i \u0111\u1eb7t th\u01b0 vi\u1ec7n",source:"@site/docs/nestjs-swagger.md",sourceDirName:".",slug:"/nestjs-swagger",permalink:"/nestjs/nestjs-swagger",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Serve static file trong NestJS",permalink:"/nestjs/serve-static-file"},next:{title:"Note v\u1ec1 NestJS",permalink:"/nestjs/nestjs-note"}},l={},a=[{value:"C\xe0i \u0111\u1eb7t th\u01b0 vi\u1ec7n",id:"c\xe0i-\u0111\u1eb7t-th\u01b0-vi\u1ec7n",level:2},{value:"C\u1ea5u h\xecnh Swagger Plugin",id:"c\u1ea5u-h\xecnh-swagger-plugin",level:2},{value:"C\u1ea5u h\xecnh Swagger",id:"c\u1ea5u-h\xecnh-swagger",level:2}];function g(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"nestjs-swagger",children:"Nestjs Swagger"}),"\n",(0,t.jsx)(e.h2,{id:"c\xe0i-\u0111\u1eb7t-th\u01b0-vi\u1ec7n",children:"C\xe0i \u0111\u1eb7t th\u01b0 vi\u1ec7n"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"npm install @nestjs/swagger\n"})}),"\n",(0,t.jsx)(e.h2,{id:"c\u1ea5u-h\xecnh-swagger-plugin",children:"C\u1ea5u h\xecnh Swagger Plugin"}),"\n",(0,t.jsxs)(e.admonition,{type:"info",children:[(0,t.jsx)(e.p,{children:"Plugin Swagger s\u1ebd t\u1ef1 \u0111\u1ed9ng:"}),(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"T\u1ef1 \u0111\u1ed9ng \u0111\u1ecdc c\xe1c thu\u1ed9c t\xednh body request v\xe0 response \u1edf c\xe1c file m\xe0 ta \u0111\u1ecbnh ngh\u0129a DTO."}),"\n",(0,t.jsxs)(e.li,{children:["Thi\u1ebft l\u1eadp thu\u1ed9c t\xednh ",(0,t.jsx)(e.code,{children:"required"}),' t\xf9y thu\u1ed9c v\xe0o d\u1ea5u "?" \u1edf property (v\xed d\u1ee5: ',(0,t.jsx)(e.code,{children:"name?: string"})," s\u1ebd \u0111\u1eb7t ",(0,t.jsx)(e.code,{children:"required: false"}),")"]}),"\n",(0,t.jsxs)(e.li,{children:["Thi\u1ebft l\u1eadp ",(0,t.jsx)(e.code,{children:"type "}),"ho\u1eb7c ",(0,t.jsx)(e.code,{children:"enum "}),"t\xf9y thu\u1ed9c v\xe0o ki\u1ec3u ta \u0111\u1ecbnh ngh\u0129a (h\u1ed7 tr\u1ee3 ki\u1ec3u m\u1ea3ng)"]}),"\n",(0,t.jsxs)(e.li,{children:["Thi\u1ebft l\u1eadp gi\xe1 tr\u1ecb ",(0,t.jsx)(e.code,{children:"default"})," d\u1ef1a tr\xean gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh \u0111\u01b0\u1ee3c g\xe1n"]}),"\n",(0,t.jsx)(e.li,{children:"Thi\u1ebft l\u1eadp m\u1ed9t s\u1ed1 quy t\u1eafc x\xe1c th\u1ef1c d\u1ef1a tr\xean c\xe1c tr\xecnh trang tr\xed class-validator"}),"\n"]})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u0110\u1ec3 thi\u1ebft l\u1eadp Swagger Plugin, v\xe0o file ",(0,t.jsx)(e.strong,{children:"nest-cli.json"})," v\xe0 th\xeam plugin nh\u01b0 sau:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "collection": "@nestjs/schematics",\n  "sourceRoot": "src",\n  "compilerOptions": {\n    "plugins": ["@nestjs/swagger"]\n  }\n}\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Ta c\xf3 th\u1ec3 th\xeam c\xe1c c\u1ea5u h\xecnh cho plugin:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'"plugins": [\n  {\n    "name": "@nestjs/swagger",\n    "options": {\n      "classValidatorShim": false,\n      "introspectComments": true\n    }\n  }\n]\n'})}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"T\xf9y ch\u1ecdn"}),(0,t.jsx)(e.th,{children:"Gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh"}),(0,t.jsx)(e.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsx)(e.tbody,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"dtoFileNameSuffix"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"['.dto.ts', '.entity.ts']"})}),(0,t.jsx)(e.td,{children:"\u0110u\xf4i file m\xe0 plugin s\u1ebd \u0111\u1ecdc DTO"})]})})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"D\u01b0\u1edbi \u0111\xe2y l\xe0 so s\xe1nh khi ta kh\xf4ng d\xf9ng v\xe0 d\xf9ng Swagger Plugin:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"export class CreateUserDto {\n  @ApiProperty()\n  email: string;\n\n  @ApiProperty()\n  password: string;\n\n  @ApiProperty({ enum: RoleEnum, default: [], isArray: true })\n  roles: RoleEnum[] = [];\n\n  @ApiProperty({ required: false, default: true })\n  isEnabled?: boolean = true;\n}\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"export class CreateUserDto {\n  email: string;\n  password: string;\n  roles: RoleEnum[] = [];\n  isEnabled?: boolean = true;\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"c\u1ea5u-h\xecnh-swagger",children:"C\u1ea5u h\xecnh Swagger"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["T\u1ea1o file ",(0,t.jsx)(e.strong,{children:"swagger.config.ts"}),":"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"import { DocumentBuilder, SwaggerCustomOptions } from '@nestjs/swagger';\n\nexport const swaggerConfig = new DocumentBuilder()\n  .setTitle('Task Management APIs')\n  .setDescription('The Task Management API description')\n  .setVersion('1.0')\n  .addBearerAuth({\n    type: 'http',\n    scheme: 'Bearer',\n    description: 'Enter your access token here'\n  })\n  .build();\n\nexport const swaggerOptions: SwaggerCustomOptions = {\n  customSiteTitle: 'Task Management API',\n  customCss: '.swagger-ui section.models { display: none}',\n  customfavIcon: '/public/static/app-logo.svg'\n};\n"})}),"\n",(0,t.jsx)(e.admonition,{type:"note",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Xem c\xe1ch c\u1ea5u h\xecnh \u0111\u1ec3 serve file t\u0129nh favIcon ",(0,t.jsx)(e.a,{href:"./serve-static-file",children:"t\u1ea1i \u0111\xe2y"})]}),"\n"]})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Cu\u1ed1i c\xf9ng, \u1edf file ",(0,t.jsx)(e.strong,{children:"main.ts"}),":"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"import { Logger } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule } from '@nestjs/swagger';\nimport { WinstonModule } from 'nest-winston';\n\nimport { AppModule } from './app.module';\nimport { winstonLogger } from 'src/common/logger/logger.config';\nimport {\n  swaggerConfig,\n  swaggerOptions\n} from 'src/common/swagger/swagger.config';\nimport { IEnvironmentVariables } from 'src/common/types/env.type';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule, {\n    logger: WinstonModule.createLogger({ instance: winstonLogger })\n  });\n  const configService = app.get(ConfigService<IEnvironmentVariables>);\n  const nestServerPort = configService.get<number>('NEST_SERVER_PORT')!;\n\n  app.setGlobalPrefix('api/v1');\n  app.enableCors({ origin: '*' });\n\n  const document = SwaggerModule.createDocument(app, swaggerConfig);\n  SwaggerModule.setup('/', app, document, swaggerOptions);\n\n  await app.listen(nestServerPort);\n  Logger.log(\n    `Server is running on: http://localhost:${nestServerPort}`,\n    bootstrap.name\n  );\n}\nbootstrap();\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["V\xe0 gi\u1edd m\u1edf URL: ",(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.a,{href:"http://localhost:8080/",children:"http://localhost:8080/"})})," v\xe0 Swagger API Document \u0111\xe3 \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp."]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(g,{...n})}):g(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>c});var t=s(6540);const r={},i=t.createContext(r);function o(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);