"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[737],{4374:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"validation/class-validator","title":"Class validator","description":"- \u1ede m\u1ee5c v\u1ec1 NestJS Pipe (xem t\u1ea1i \u0111\xe2y), ta \u0111\xe3 bi\u1ebft th\u01b0 vi\u1ec7n class-validator \u0111\u1ec3 validate d\u1eef li\u1ec7u c\u1ee7a body, query th\xf4ng qua c\xe1c decorator do n\xf3 cung c\u1ea5p. \u1ede ph\u1ea7n n\xe0y, ta s\u1ebd t\xecm hi\u1ec3u chi ti\u1ebft v\u1ec1 n\xf3.","source":"@site/docs/validation/class-validator.md","sourceDirName":"validation","slug":"/validation/class-validator","permalink":"/nestjs/validation/class-validator","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Validation","permalink":"/nestjs/category/validation"},"next":{"title":"Class transformer","permalink":"/nestjs/validation/class-transformer"}}');var i=n(4848),r=n(8453);const d={sidebar_position:1},c="Class validator",a={},l=[{value:"C\xe1c decorator s\u1eb5n c\xf3",id:"c\xe1c-decorator-s\u1eb5n-c\xf3",level:2},{value:"Array validation",id:"array-validation",level:2},{value:"Validating nested objects",id:"validating-nested-objects",level:2},{value:"Conditional validation",id:"conditional-validation",level:2},{value:"Inheriting Validation decorators",id:"inheriting-validation-decorators",level:2},{value:"Custom validation decorator",id:"custom-validation-decorator",level:2},{value:"V\xed d\u1ee5 1",id:"v\xed-d\u1ee5-1",level:3},{value:"V\xed d\u1ee5 2",id:"v\xed-d\u1ee5-2",level:3},{value:"V\xed d\u1ee5 3",id:"v\xed-d\u1ee5-3",level:3}];function o(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"class-validator",children:"Class validator"})}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u1ede m\u1ee5c v\u1ec1 NestJS Pipe (xem ",(0,i.jsx)(s.a,{href:"../nestjs-fundamentals/pipes#validationpipe-cho-object-validation",children:"t\u1ea1i \u0111\xe2y"}),"), ta \u0111\xe3 bi\u1ebft th\u01b0 vi\u1ec7n ",(0,i.jsx)(s.strong,{children:"class-validator"})," \u0111\u1ec3 validate d\u1eef li\u1ec7u c\u1ee7a body, query th\xf4ng qua c\xe1c decorator do n\xf3 cung c\u1ea5p. \u1ede ph\u1ea7n n\xe0y, ta s\u1ebd t\xecm hi\u1ec3u chi ti\u1ebft v\u1ec1 n\xf3."]}),"\n"]})}),"\n",(0,i.jsx)(s.h2,{id:"c\xe1c-decorator-s\u1eb5n-c\xf3",children:"C\xe1c decorator s\u1eb5n c\xf3"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"D\u01b0\u1edbi \u0111\xe2y l\xe0 c\xe1c validation decorator s\u1eb5n c\xf3 do th\u01b0 vi\u1ec7n cung c\u1ea5p:"}),"\n"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Decorator"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Common validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsDefined(value: any)"})}),(0,i.jsx)(s.td,{children:"Checks if value is defined (!== undefined, !== null). This is the only decorator that ignores skipMissingProperties option."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsOptional()"})}),(0,i.jsx)(s.td,{children:"Checks if given value is empty (=== null, === undefined) and if so, ignores all the validators on the property."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Equals(comparison: any)"})}),(0,i.jsx)(s.td,{children:'Checks if value equals ("===") comparison.'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@NotEquals(comparison: any)"})}),(0,i.jsx)(s.td,{children:'Checks if value not equal ("!==") comparison.'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsEmpty()"})}),(0,i.jsx)(s.td,{children:"Checks if given value is empty (=== '', === null, === undefined)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNotEmpty()"})}),(0,i.jsx)(s.td,{children:"Checks if given value is not empty (!== '', !== null, !== undefined)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsIn(values: any[])"})}),(0,i.jsx)(s.td,{children:"Checks if value is in an array of allowed values."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNotIn(values: any[])"})}),(0,i.jsx)(s.td,{children:"Checks if value is not in an array of disallowed values."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Type validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBoolean()"})}),(0,i.jsx)(s.td,{children:"Checks if a value is a boolean."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsDate()"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a date."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsString()"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a string."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNumber(options: IsNumberOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsInt()"})}),(0,i.jsx)(s.td,{children:"Checks if the value is an integer number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsArray()"})}),(0,i.jsx)(s.td,{children:"Checks if the value is an array"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsEnum(entity: object)"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a valid enum"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Number validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsDivisibleBy(num: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a number that's divisible by another."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsPositive()"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a positive number greater than zero."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNegative()"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a negative number smaller than zero."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Min(min: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the given number is greater than or equal to given number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Max(max: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the given number is less than or equal to given number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Date validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@MinDate(date: Date | (() => Date))"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a date that's after the specified date."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@MaxDate(date: Date | (() => Date))"})}),(0,i.jsx)(s.td,{children:"Checks if the value is a date that's before the specified date."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"String-type validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBooleanString()"})}),(0,i.jsx)(s.td,{children:'Checks if a string is a boolean (e.g. is "true" or "false" or "1", "0").'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsDateString()"})}),(0,i.jsxs)(s.td,{children:["Alias for ",(0,i.jsx)(s.code,{children:"@IsISO8601()"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNumberString(options?: IsNumericOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if a string is a number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"String validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Contains(seed: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains the seed."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@NotContains(seed: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string not contains the seed."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsAlpha()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains only letters (a-zA-Z)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsAlphanumeric()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains only letters and numbers."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsDecimal(options?: IsDecimalOptions)"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a valid decimal value. Default IsDecimalOptions are ",(0,i.jsx)(s.code,{children:"force_decimal=False"}),", ",(0,i.jsx)(s.code,{children:"decimal_digits: '1,'"}),", ",(0,i.jsx)(s.code,{children:"locale: 'en-US'"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsAscii()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains ASCII chars only."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBase32()"})}),(0,i.jsx)(s.td,{children:"Checks if a string is base32 encoded."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBase58()"})}),(0,i.jsx)(s.td,{children:"Checks if a string is base58 encoded."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBase64(options?: IsBase64Options)"})}),(0,i.jsx)(s.td,{children:"Checks if a string is base64 encoded."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsIBAN()"})}),(0,i.jsx)(s.td,{children:"Checks if a string is a IBAN (International Bank Account Number)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBIC()"})}),(0,i.jsx)(s.td,{children:"Checks if a string is a BIC (Bank Identification Code) or SWIFT code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsByteLength(min: number, max?: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the string's length (in bytes) falls in a range."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsCreditCard()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a credit card."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsCurrency(options?: IsCurrencyOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid currency amount."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISO4217CurrencyCode()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is an ISO 4217 currency code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsEthereumAddress()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is an Ethereum address using basic regex. Does not validate address checksums."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsBtcAddress()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid BTC address."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsDataURI()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a data uri format."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsEmail(options?: IsEmailOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is an email."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsFQDN(options?: IsFQDNOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a fully qualified domain name (e.g. domain.com)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsFullWidth()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains any full-width chars."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsHalfWidth()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains any half-width chars."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsVariableWidth()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains a mixture of full and half-width chars."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsHexColor()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a hexadecimal color."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsHSL()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is an HSL color based on",(0,i.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value",children:"CSS Colors Level 4 specification"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsRgbColor(options?: IsRgbOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a rgb or rgba color."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsIdentityCard(locale?: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid identity card code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsPassportNumber(countryCode?: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid passport number relative to a specific country code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsPostalCode(locale?: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a postal code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsHexadecimal()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a hexadecimal number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsOctal()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a octal number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMACAddress(options?: IsMACAddressOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a MAC Address."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:'@IsIP(version?: "4"|"6")'})}),(0,i.jsx)(s.td,{children:"Checks if the string is an IP (version 4 or 6)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsPort()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid port number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:'@IsISBN(version?: "10"|"13")'})}),(0,i.jsx)(s.td,{children:"Checks if the string is an ISBN (version 10 or 13)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsEAN()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is an if the string is an EAN (European Article Number)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISIN()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is an ISIN (stock/security identifier)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISO8601(options?: IsISO8601Options)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid ISO 8601 date format. Use the option strict = true for additional checks for a valid date."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsJSON()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is valid JSON."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsJWT()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is valid JWT."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsObject()"})}),(0,i.jsx)(s.td,{children:"Checks if the object is valid Object (null, functions, arrays will return false)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNotEmptyObject()"})}),(0,i.jsx)(s.td,{children:"Checks if the object is not empty."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsLowercase()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is lowercase."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsLatLong()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid latitude-longitude coordinate in the format lat, long."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsLatitude()"})}),(0,i.jsx)(s.td,{children:"Checks if the string or number is a valid latitude coordinate."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsLongitude()"})}),(0,i.jsx)(s.td,{children:"Checks if the string or number is a valid longitude coordinate."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMobilePhone(locale: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a mobile phone number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISO31661Alpha2()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid ISO 3166-1 alpha-2 officially assigned country code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISO31661Alpha3()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid ISO 3166-1 alpha-3 officially assigned country code."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsLocale()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a locale."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsPhoneNumber(region: string)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid phone number using libphonenumber-js."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMongoId()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a valid hex-encoded representation of a MongoDB ObjectId."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMultibyte()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains one or more multibyte chars."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsNumberString(options?: IsNumericOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is numeric."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsSurrogatePair()"})}),(0,i.jsx)(s.td,{children:"Checks if the string contains any surrogate pairs chars."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsTaxId()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a valid tax ID. Default locale is ",(0,i.jsx)(s.code,{children:"en-US"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsUrl(options?: IsURLOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a URL."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMagnetURI()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a",(0,i.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Magnet_URI_scheme",children:"magnet uri format"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsUUID(version?: UUIDVersion)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a UUID (version 3, 4, 5 or all )."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsFirebasePushId()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a",(0,i.jsx)(s.a,{href:"https://firebase.googleblog.com/2015/02/the-2120-ways-to-ensure-unique_68.html",children:"Firebase Push ID"})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsUppercase()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is uppercase."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Length(min: number, max?: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the string's length falls in a range."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@MinLength(min: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the string's length is not less than given number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@MaxLength(max: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the string's length is not more than given number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Matches(pattern: RegExp, modifiers?: string)"})}),(0,i.jsx)(s.td,{children:"Checks if string matches the pattern. Either matches('foo', /foo/i) or matches('foo', 'foo', 'i')."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMilitaryTime()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a valid representation of military time in the format HH",":MM","."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsTimeZone()"})}),(0,i.jsx)(s.td,{children:"Checks if the string represents a valid IANA time-zone."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsHash(algorithm: string)"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a hash The following types are supported:",(0,i.jsx)(s.code,{children:"md4"}),", ",(0,i.jsx)(s.code,{children:"md5"}),", ",(0,i.jsx)(s.code,{children:"sha1"}),", ",(0,i.jsx)(s.code,{children:"sha256"}),", ",(0,i.jsx)(s.code,{children:"sha384"}),", ",(0,i.jsx)(s.code,{children:"sha512"}),", ",(0,i.jsx)(s.code,{children:"ripemd128"}),", ",(0,i.jsx)(s.code,{children:"ripemd160"}),", ",(0,i.jsx)(s.code,{children:"tiger128"}),", ",(0,i.jsx)(s.code,{children:"tiger160"}),", ",(0,i.jsx)(s.code,{children:"tiger192"}),", ",(0,i.jsx)(s.code,{children:"crc32"}),", ",(0,i.jsx)(s.code,{children:"crc32b"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsMimeType()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string matches to a valid",(0,i.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Media_type",children:"MIME type"})," format"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsSemVer()"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a Semantic Versioning Specification (SemVer)."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISSN(options?: IsISSNOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a ISSN."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsISRC()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a",(0,i.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/International_Standard_Recording_Code",children:"ISRC"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsRFC3339()"})}),(0,i.jsxs)(s.td,{children:["Checks if the string is a valid",(0,i.jsx)(s.a,{href:"https://tools.ietf.org/html/rfc3339",children:"RFC 3339"})," date."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsStrongPassword(options?: IsStrongPasswordOptions)"})}),(0,i.jsx)(s.td,{children:"Checks if the string is a strong password."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Array validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@ArrayContains(values: any[])"})}),(0,i.jsx)(s.td,{children:"Checks if array contains all values from the given array of values."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@ArrayNotContains(values: any[])"})}),(0,i.jsx)(s.td,{children:"Checks if array does not contain any of the given values."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@ArrayNotEmpty()"})}),(0,i.jsx)(s.td,{children:"Checks if given array is not empty."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@ArrayMinSize(min: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the array's length is greater than or equal to the specified number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@ArrayMaxSize(max: number)"})}),(0,i.jsx)(s.td,{children:"Checks if the array's length is less or equal to the specified number."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@ArrayUnique(identifier?: (o) => any)"})}),(0,i.jsx)(s.td,{children:"Checks if all array's values are unique. Comparison for objects is reference-based. Optional function can be speciefied which return value will be used for the comparsion."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Object validation decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@IsInstance(value: any)"})}),(0,i.jsx)(s.td,{children:"Checks if the property is an instance of the passed value."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Other decorators"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"@Allow()"})}),(0,i.jsx)(s.td,{children:"Prevent stripping off the property when no other constraint is specified for it."})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"array-validation",children:"Array validation"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u0110\u1ec3 validate c\xe1c ph\u1ea7n t\u1eed trong m\u1ed9t array, ta s\u1eed d\u1ee5ng ",(0,i.jsx)(s.code,{children:"each: true"})," khi s\u1eed d\u1ee5ng decorator, v\xed d\u1ee5:"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="CreateUser.dto.ts"',children:'import { IsNotEmpty, IsString, IsArray } from "class-validator";\n\nexport class CreateUserDTO {\n  @IsString()\n  @IsNotEmpty()\n  name: string;\n\n  @IsString({ each: true })\n  @IsNotEmpty({ each: true })\n  @IsArray()\n  address: string[];\n}\n'})}),"\n",(0,i.jsx)(s.h2,{id:"validating-nested-objects",children:"Validating nested objects"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["N\u1ebfu thu\u1ed9c t\xednh l\xe0 m\u1ed9t object v\xe0 ta mu\u1ed1n validate t\u1eebng field trong object \u0111\xf3, ta s\u1eed d\u1ee5ng decorator ",(0,i.jsx)(s.code,{children:"@ValidateNested()"}),", v\xed d\u1ee5:"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'import { ValidateNested } from "class-validator";\n\nexport class Post {\n  @ValidateNested()\n  user: User;\n}\n'})}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Khi s\u1eed d\u1ee5ng decorator ",(0,i.jsx)(s.code,{children:"@ValidateNested()"})," h\xe3y k\u1ebft h\u1ee3p v\u1edbi decorator ",(0,i.jsx)(s.a,{href:"./class-transformer#type",children:"@Type()"})," c\u1ee7a th\u01b0 vi\u1ec7n class-transformer."]}),"\n"]})}),"\n",(0,i.jsx)(s.h2,{id:"conditional-validation",children:"Conditional validation"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Ta s\u1eed d\u1ee5ng decorator ",(0,i.jsx)(s.code,{children:"@ValidateIf()"})," \u0111\u1ec3 validate 1 field d\u1ef1a theo \u0111i\u1ec1u ki\u1ec7n \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh, v\xed d\u1ee5:"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'import { ValidateIf, IsNotEmpty } from "class-validator";\n\nexport class Post {\n  otherProperty: string;\n\n  @ValidateIf((o) => o.otherProperty === "value")\n  @IsNotEmpty()\n  example: string;\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Trong v\xed d\u1ee5 tr\xean, ch\u1ec9 khi n\xe0o field ",(0,i.jsx)(s.strong,{children:"otherProperty"}),' c\xf3 gi\xe1 tr\u1ecb l\xe0 "value" th\xec n\xf3 m\u1edbi validate field ',(0,i.jsx)(s.strong,{children:"example"})]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'export class ExampleDTO {\n  @IsOptional()\n  @ValidateIf((o) => o.content)\n  @IsString()\n  @MinLength(5)\n  @MaxLength(100)\n  @IsUUID("4")\n  content?: string;\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Trong v\xed d\u1ee5 tr\xean, tr\u01b0\u1eddng ",(0,i.jsx)(s.code,{children:"content"})," c\xf3 th\u1ec3 c\xf3 gi\xe1 tr\u1ecb ho\u1eb7c kh\xf4ng, nh\u01b0ng m\u1ed9t khi \u0111\xe3 c\xf3 gi\xe1 tr\u1ecb th\xec n\xf3 s\u1ebd validate."]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"tip",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Decorator ",(0,i.jsx)(s.code,{children:"@ValidateIf()"})," th\u01b0\u1eddng xuy\xean \u0111i c\xf9ng v\u1edbi ",(0,i.jsx)(s.code,{children:"@IsOptional()"})," \u0111\u1ec3 \xe1p d\u1ee5ng validate 1 tr\u01b0\u1eddng optional"]}),"\n"]})}),"\n",(0,i.jsx)(s.h2,{id:"inheriting-validation-decorators",children:"Inheriting Validation decorators"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Class validator cho ph\xe9p ta validate d\u1ef1a tr\xean k\u1ebf th\u1eeba, v\xed d\u1ee5:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",children:'import { validate } from "class-validator";\n\nclass BaseContent {\n  @IsEmail()\n  email: string;\n\n  @IsString()\n  password: string;\n}\n\nclass User extends BaseContent {\n  @MinLength(10)\n  @MaxLength(20)\n  name: string;\n\n  @Contains("hello")\n  welcome: string;\n\n  @MinLength(20)\n  password: string;\n}\n\nlet user = new User();\n\nuser.email = "invalid email"; // inherited property\nuser.password = "too short"; // password wil be validated not only against IsString, but against MinLength as well\nuser.name = "not valid";\nuser.welcome = "helo";\n\nvalidate(user).then((errors) => {\n  // ...\n}); // it will return errors for email, password, name and welcome properties\n'})}),"\n",(0,i.jsx)(s.h2,{id:"custom-validation-decorator",children:"Custom validation decorator"}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u0110\u1ec3 t\u1ef1 t\u1ea1o m\u1ed9t validation decorator, ta t\u1ea1o m\u1ed9t class v\xe0 ",(0,i.jsx)(s.code,{children:"implements ValidatorConstraintInterface"})]}),"\n",(0,i.jsx)(s.li,{children:"\u0110\u1ec3 hi\u1ec3u c\u1ee5 th\u1ec3 h\u01a1n, xem c\xe1c v\xed d\u1ee5 b\xean d\u01b0\u1edbi."}),"\n"]})}),"\n",(0,i.jsx)(s.h3,{id:"v\xed-d\u1ee5-1",children:"V\xed d\u1ee5 1"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u1ede v\xed d\u1ee5 sau, ta t\u1ea1o custom decorator ",(0,i.jsx)(s.code,{children:"@IsDateTimeAfter()"})," \u0111\u1ec3 validate m\u1ed9t tr\u01b0\u1eddng c\xf3 gi\xe1 tr\u1ecb DateTime xem gi\xe1 tr\u1ecb c\u1ee7a n\xf3 c\xf3 sau m\u1ed9t gi\xe1 tr\u1ecb DateTime c\u1ee7a tr\u01b0\u1eddng kh\xe1c trong object hay kh\xf4ng."]}),"\n",(0,i.jsx)(s.li,{children:"T\u1ea1o validation decorator:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="IsDateTimeAfter.validator.ts"',children:'import {\n  registerDecorator,\n  ValidationArguments,\n  ValidationOptions,\n  ValidatorConstraint,\n  ValidatorConstraintInterface,\n} from "class-validator";\nimport dayjs from "dayjs";\n\n@ValidatorConstraint({ name: "IsDateTimeAfter", async: false })\nclass IsDateTimeAfterConstraint implements ValidatorConstraintInterface {\n  validate(value: string | Date, validationArguments: ValidationArguments) {\n    /*\n       validationArguments.constraints: l\u1ea5y gi\xe1 tr\u1ecb c\u1ee7a (1)\n    */\n    const [relatedPropertyName] = validationArguments.constraints;\n    const relatedValue = (validationArguments.object as any)[\n      relatedPropertyName\n    ];\n    return dayjs(value).isAfter(dayjs(relatedValue));\n  }\n\n  defaultMessage(validationArguments: ValidationArguments) {\n    const [relatedPropertyName] = validationArguments.constraints;\n    const { property } = validationArguments;\n    return `${property} must be after ${relatedPropertyName}`;\n  }\n}\n\nexport function IsDateTimeAfter<O>(\n  property: keyof O,\n  validationOptions?: ValidationOptions\n) {\n  return function (object: object, propertyName: string) {\n    registerDecorator({\n      target: object.constructor,\n      propertyName: propertyName,\n      options: validationOptions,\n      constraints: [property], // (1)\n      validator: IsDateTimeAfterConstraint,\n    });\n  };\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"S\u1eed d\u1ee5ng decorator \u0111\xf3 b\xean trong DTO:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="CreateSchedule.dto.ts"',children:'import { IsDateString, IsNotEmpty } from "class-validator";\n\nimport { IsDateTimeAfter } from "src/common/decorators/class-validator/IsDateTimeAfter.validator";\n\nexport class CreateScheduleDTO {\n  @IsDateString()\n  @IsNotEmpty()\n  startDate: Date;\n\n  @IsDateTimeAfter<CreateScheduleDTO>("startDate")\n  @IsDateString()\n  @IsNotEmpty()\n  endDate: Date;\n}\n'})}),"\n",(0,i.jsxs)(s.admonition,{type:"info",children:[(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Ta h\xe3y xem gi\xe1 tr\u1ecb c\u1ee7a ",(0,i.jsx)(s.code,{children:"validationArguments"}),":"]}),"\n"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-plaintext",children:"validationArguments: {\n  targetName: 'CreateScheduleDTO',\n  property: 'endDate',\n  object: CreateScheduleDTO {\n    startDate: '2024-10-17T07:03:30.751Z',\n    endDate: '2024-10-17T07:03:05.589Z'\n  },\n  value: '2024-10-17T07:03:05.589Z',\n  constraints: [ 'startDate' ]\n}\n"})})]}),"\n",(0,i.jsx)(s.h3,{id:"v\xed-d\u1ee5-2",children:"V\xed d\u1ee5 2"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"V\u1eabn gi\u1ed1ng v\xed d\u1ee5 1 nh\u01b0ng linh ho\u1ea1t h\u01a1n, ta c\xf3 th\u1ec3 truy\u1ec1n gi\xe1 tr\u1ecb c\u1ee5 th\u1ec3 ho\u1eb7c related field thay v\xec ch\u1ec9 ch\u1ec9 \u0111\u1ecbnh m\u1ed7i related field nh\u01b0 \u1edf v\xed d\u1ee5 1:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="IsDateTimeAfter.validator.ts"',children:'import {\n  registerDecorator,\n  ValidationArguments,\n  ValidationOptions,\n  ValidatorConstraint,\n  ValidatorConstraintInterface,\n} from "class-validator";\nimport dayjs, { Dayjs } from "dayjs";\n\n@ValidatorConstraint({ name: "IsDateTimeAfter", async: false })\nclass IsDateTimeAfterConstraint implements ValidatorConstraintInterface {\n  validate(\n    value: Dayjs | Date | string,\n    validationArguments: ValidationArguments\n  ) {\n    const { object } = validationArguments;\n    const compareValue: Date | string = validationArguments.constraints[0](\n      object,\n      value\n    );\n    return dayjs(value).isAfter(dayjs(compareValue));\n  }\n\n  defaultMessage(validationArguments: ValidationArguments) {\n    const { object, value } = validationArguments;\n    const compareValue: Date | string = validationArguments.constraints[0](\n      object,\n      value\n    );\n    const { property } = validationArguments;\n    return `${property} must be after ${compareValue}`;\n  }\n}\n\nexport function IsDateTimeAfter<O, V = any>(\n  callback: (object: O, value: V) => Dayjs | Date | string,\n  validationOptions?: ValidationOptions\n) {\n  return function (object: object, propertyName: string) {\n    registerDecorator({\n      target: object.constructor,\n      propertyName: propertyName,\n      options: validationOptions,\n      constraints: [callback],\n      validator: IsDateTimeAfterConstraint,\n    });\n  };\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"V\xe0 gi\u1edd ta c\xf3 th\u1ec3 truy\u1ec1n 1 gi\xe1 tr\u1ecb c\u1ee5 th\u1ec3 ho\u1eb7c 1 related field trong DTO:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="CreateSchedule.dto.ts"',children:'import { IsDateString, IsNotEmpty } from "class-validator";\nimport dayjs from "dayjs";\n\nimport { IsDateTimeAfter } from "src/common/decorators/class-validator/IsDateTimeAfter.validator";\n\nexport class CreateScheduleDTO {\n  @IsDateString()\n  @IsNotEmpty()\n  startDate: Date;\n\n  // @IsDateTimeAfter<CreateScheduleDTO>((o) => o.startDate)\n  // @IsDateTimeAfter(() => dayjs(\'2021-01-01\'))\n  @IsDateString()\n  @IsNotEmpty()\n  endDate: Date;\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"v\xed-d\u1ee5-3",children:"V\xed d\u1ee5 3"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u1ede v\xed d\u1ee5 n\xe0y, ta s\u1ebd t\u1ea1o custom decorator c\xf3 s\u1eed d\u1ee5ng dependency. C\u1ee5 th\u1ec3, ta s\u1ebd validate li\u1ec7u m\u1ed9t user c\xf3 t\u1ed3n t\u1ea1i hay kh\xf4ng d\u1ef1a tr\xean id."}),"\n",(0,i.jsx)(s.li,{children:"T\u1ea1o class validator decorator:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="IsUserExist.validator.ts"',children:'import { Injectable } from "@nestjs/common";\nimport {\n  registerDecorator,\n  ValidationArguments,\n  ValidationOptions,\n  ValidatorConstraint,\n  ValidatorConstraintInterface,\n} from "class-validator";\n\nimport { PrismaService } from "src/modules/libs/prisma/prisma.service";\n\n@Injectable()\n@ValidatorConstraint({ name: "IsUserExist", async: true }) // \u0110\u1eb7t "async: true" \u0111\u1ec3 cho th\u01b0 vi\u1ec7n bi\u1ebft h\xe0m "validate" l\xe0 b\u1ea5t \u0111\u1ed3ng b\u1ed9\nexport class IsUserExistConstraint implements ValidatorConstraintInterface {\n  constructor(private readonly prisma: PrismaService) {}\n\n  async validate(value: string, args: ValidationArguments) {\n    const user = await this.prisma.user.findUnique({ where: { id: value } });\n    return !!user;\n  }\n\n  defaultMessage(args: ValidationArguments) {\n    return "User does not exist";\n  }\n}\n\nexport function IsUserExist(validationOptions?: ValidationOptions) {\n  return function (object: object, propertyName: string) {\n    registerDecorator({\n      target: object.constructor,\n      propertyName: propertyName,\n      options: validationOptions,\n      constraints: [],\n      validator: IsUserExistConstraint,\n    });\n  };\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"S\u1eed d\u1ee5ng custom decorator trong DTO:"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="ChangeUserInformation.dto.ts"',children:'import { IsNotEmpty, IsUUID } from "class-validator";\n\nimport { IsUserExist } from "src/common/decorators/class-validator/IsUserExist.validator";\n\nexport class ChangeUserInformationDTO {\n  @IsUserExist()\n  @IsUUID()\n  @IsNotEmpty()\n  userId: string;\n}\n'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Trong file ",(0,i.jsx)(s.strong,{children:"main.ts"}),", ta th\xeam d\xf2ng sau:"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="main.ts"',children:'import { Logger } from "@nestjs/common";\nimport { ConfigService } from "@nestjs/config";\nimport { NestFactory } from "@nestjs/core";\nimport { useContainer } from "class-validator";\nimport { WinstonModule } from "nest-winston";\n\nimport { AppModule } from "./app.module";\nimport { winstonLogger } from "src/common/configs/logger.config";\nimport { IEnvironmentVariables } from "src/common/types/env.type";\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule, {\n    logger: WinstonModule.createLogger({ instance: winstonLogger }),\n  });\n  const configService = app.get(ConfigService<IEnvironmentVariables>);\n  const nestServerPort = configService.get<number>("NEST_SERVER_PORT")!;\n\n  app.setGlobalPrefix("api/v1");\n  app.enableCors({ origin: "*" });\n  useContainer(app.select(AppModule), { fallbackOnErrors: true }); // Add this line\n\n  await app.listen(nestServerPort);\n  Logger.log(\n    `Server is running on: http://localhost:${nestServerPort}`,\n    bootstrap.name\n  );\n}\nbootstrap();\n'})}),"\n",(0,i.jsxs)(s.admonition,{type:"note",children:[(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u0110\u1eebng qu\xean th\xeam ",(0,i.jsx)(s.code,{children:"IsUserExistConstraint"})," v\xe0o m\u1ea3ng c\xe1c providers \u1edf module ta s\u1eed d\u1ee5ng n\xf3:"]}),"\n"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="user.module.ts"',children:'import { Module } from "@nestjs/common";\n\n@Module({\n  controllers: [UserController],\n  providers: [UserService, IsUserExistConstraint],\n})\nexport class UserModule {}\n'})})]}),"\n",(0,i.jsxs)(s.admonition,{type:"tip",children:[(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Ta n\xean t\u1ea1o m\u1ed9t module t\xean ",(0,i.jsx)(s.code,{children:"ClassValidatorModule"})," \u0111\u1ec3 c\u1ea5u h\xecnh t\u1ea5t c\u1ea3 c\xe1c custom class validator l\xe0m provider, sau \u0111\xf3 ch\u1ec9 c\u1ea7n import ",(0,i.jsx)(s.code,{children:"ClassValidatorModule"})," v\xe0o c\xe1c module c\u1ea7n s\u1eed d\u1ee5ng l\xe0 \u0111\u01b0\u1ee3c, v\xed d\u1ee5:"]}),"\n"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-ts",metastring:'title="class-validator.module.ts"',children:'import { Module } from "@nestjs/common";\n\n@Module({\n  providers: [IsUserExistConstraint, IsTaskExistConstraint],\n  exports: [IsUserExistConstraint, IsTaskExistConstraint],\n})\nexport class ClassValidatorModule {}\n'})})]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>c});var t=n(6540);const i={},r=t.createContext(i);function d(e){const s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);