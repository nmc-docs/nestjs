"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[112],{8749:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});var s=t(4848),r=t(8453);const c={sidebar_position:99},o="Note v\u1ec1 NestJS",i={id:"nestjs-note",title:"Note v\u1ec1 NestJS",description:"- Trong NestJS, decorator @Injectable() \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 \u0111\xe1nh d\u1ea5u m\u1ed9t l\u1edbp l\xe0 m\u1ed9t provider. C\xe1c provider trong NestJS l\xe0 c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng m\xe0 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c NestJS qu\u1ea3n l\xfd v\xe0 inject (ti\xeam) v\xe0o c\xe1c ph\u1ea7n kh\xe1c c\u1ee7a \u1ee9ng d\u1ee5ng (nh\u01b0 controller ho\u1eb7c c\xe1c provider kh\xe1c) th\xf4ng qua c\u01a1 ch\u1ebf dependency injection.",source:"@site/docs/nestjs-note.md",sourceDirName:".",slug:"/nestjs-note",permalink:"/nestjs/nestjs-note",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:99,frontMatter:{sidebar_position:99},sidebar:"tutorialSidebar",previous:{title:"Nestjs Swagger",permalink:"/nestjs/nestjs-swagger"}},d={},l=[];function a(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"note-v\u1ec1-nestjs",children:"Note v\u1ec1 NestJS"}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Trong NestJS, decorator ",(0,s.jsx)(e.code,{children:"@Injectable()"})," \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 \u0111\xe1nh d\u1ea5u m\u1ed9t l\u1edbp l\xe0 m\u1ed9t provider. C\xe1c provider trong NestJS l\xe0 c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng m\xe0 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c NestJS qu\u1ea3n l\xfd v\xe0 inject (ti\xeam) v\xe0o c\xe1c ph\u1ea7n kh\xe1c c\u1ee7a \u1ee9ng d\u1ee5ng (nh\u01b0 controller ho\u1eb7c c\xe1c provider kh\xe1c) th\xf4ng qua c\u01a1 ch\u1ebf dependency injection."]}),"\n",(0,s.jsxs)(e.li,{children:["T\u1ea1i sao c\u1ea7n s\u1eed d\u1ee5ng ",(0,s.jsx)(e.code,{children:"@Injectable()"}),"?\nDependency Injection: ",(0,s.jsx)(e.code,{children:"@Injectable()"})," gi\xfap NestJS bi\u1ebft r\u1eb1ng l\u1edbp n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c ti\xeam v\xe0o c\xe1c l\u1edbp kh\xe1c. \u0110i\u1ec1u n\xe0y gi\xfap qu\u1ea3n l\xfd s\u1ef1 ph\u1ee5 thu\u1ed9c gi\u1eefa c\xe1c l\u1edbp d\u1ec5 d\xe0ng h\u01a1n v\xe0 th\xfac \u0111\u1ea9y vi\u1ec7c s\u1eed d\u1ee5ng l\u1ea1i m\xe3 ngu\u1ed3n.\nQu\u1ea3n l\xfd lifecycle: NestJS qu\u1ea3n l\xfd v\xf2ng \u0111\u1eddi c\u1ee7a c\xe1c provider v\xe0 \u0111\u1ea3m b\u1ea3o r\u1eb1ng ch\xfang \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o v\xe0 h\u1ee7y \u0111\xfang c\xe1ch."]}),"\n"]})}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Khi t\u1ea1o m\u1ed9t service m\xe0 \u0111\u01b0\u1ee3c qu\u1ea3n l\xfd b\u1edfi Dependency Injection Container (\u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u b\u1edfi ",(0,s.jsx)(e.code,{children:"@Injectable()"}),"), ngo\u1ea1i tr\u1eeb c\xe1c ",(0,s.jsx)(e.a,{href:"./nestjs-fundamentals/guards",children:"Guard"}),", ",(0,s.jsx)(e.a,{href:"./nestjs-fundamentals/exception-filters",children:"Exception filter"}),", ",(0,s.jsx)(e.a,{href:"./nestjs-fundamentals/pipes",children:"Pipe"}),", ",(0,s.jsx)(e.a,{href:"./nestjs-fundamentals/interceptors",children:"Interceptor"}),", ",(0,s.jsx)(e.a,{href:"./nestjs-fundamentals/middleware",children:"Middleware"})," th\xec n\xean cho ch\xfang v\xe0o m\u1ed9t module. Khi s\u1eed d\u1ee5ng c\xe1c service n\xe0y th\xec import module \u0111\xf3 v\xe0o."]}),"\n"]})}),"\n",(0,s.jsxs)(e.admonition,{type:"note",children:[(0,s.jsx)(e.p,{children:"\u274cKH\xd4NG N\xcaN VI\u1ebeT KI\u1ec2U N\xc0Y:"}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'import { Injectable } from "@nestjs/common";\nimport { Redis } from "ioredis";\n\n@Injectable()\nexport class RedisService {\n  private redis: Redis;\n\n  constructor() {\n    this.redis = new Redis();\n  }\n}\n'})}),(0,s.jsx)(e.p,{children:"\u2705N\xcaN VI\u1ebeT NH\u01af N\xc0Y: t\u1ea1o th\xe0nh m\u1ed9t service m\u1edbi \u0111\u1ec3 d\u1ec5 qu\u1ea3n l\xfd, sau \u0111\xf3 b\u1ecf h\u1ebft v\xe0o m\u1ed9t module."}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'import { Inject, Injectable, Logger, OnModuleInit } from "@nestjs/common";\nimport { Redis, RedisOptions } from "ioredis";\n\nimport { EProviderKey } from "src/common/constants/provider-key.constant";\n\n@Injectable()\nexport class RedisProvider extends Redis {\n  //Ta \u0111\u01b0\u1ee3c vi\u1ebft nh\u01b0 n\xe0y b\u1edfi v\xec logger n\xe0y l\xe0 m\u1ed9t constant v\xe0 ch\u1ec9 \xe1p d\u1ee5ng cho ri\xeang service RedisProvider\n  private readonly logger = new Logger(RedisProvider.name);\n\n  constructor(@Inject(EProviderKey.REDIS_OPTIONS) options: RedisOptions) {\n    super(options);\n  }\n\n  async onModuleInit() {\n    try {\n      const redisInfo = await this.info();\n      await this.config("SET", "notify-keyspace-events", "KEA");\n      this.logger.log("\ud83d\ude80 Connect to Redis successfully!");\n    } catch (error) {\n      this.disconnect();\n      throw new Error(\n        `\u274c Connect to Redis failed: ${(error as Error).message}`\n      );\n    }\n  }\n}\n'})}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'import { Injectable } from "@nestjs/common";\nimport { Redis } from "ioredis";\n\n@Injectable()\nexport class RedisService {\n  constructor(private redis: RedisProvider) {}\n}\n'})})]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var s=t(6540);const r={},c=s.createContext(r);function o(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);